<?xml version="1.0" ?>
<!-- Copyright 2019 Vuente
     Copyright 2020 Le Filament (<https://www.le-filament.com>)
     License GPL-3.0 or later (https://www.gnu.org/licenses/gpl). -->
<odoo>
    <data>
        <record id="conditional_survey" model="ir.ui.view">
            <field name="name">survey.question.view.form.inherit.conditional</field>
            <field name="model">survey.question</field>
            <field name="inherit_id" ref="survey.survey_question_form" />
            <field name="arch" type="xml">
                <field name="constr_mandatory" position="attributes">
                    <attribute
                        name="attrs"
                    >{'invisible': [('conditional','=', True)]}</attribute>
                </field>
                <field name="constr_mandatory" position="after">
                    <field name="survey_id" invisible="1" readonly="1" />
                    <field
                        name="conditional"
                        attrs="{'invisible':[('constr_mandatory', '=', True)]}"
                    />
                    <field
                        name="conditional_question_id"
                        domain="[('can_be_conditional', '=', True), ('survey_id', '=', survey_id)]"
                        attrs="{'invisible':[('conditional', '=', False)], 'required': [('conditional', '=', True)]}"
                        options="{'no_create_edit': True,}"
                    />
                    <field name="conditional_question_type" invisible="1" />
                    <field
                        name="conditional_option_id"
                        attrs="{'invisible':['|', '|', ('conditional', '=', False), ('conditional_question_id', '=', False),  ('conditional_question_type', '!=', 'simple_choice')], 'required':[('conditional', '=', True), ('conditional_question_type', '=', 'simple_choice')]}"
                        domain="[('question_id','=',conditional_question_id)]"
                        options="{'no_create_edit': True,}"
                    />
                    <field
                        name="conditional_minimum_value"
                        attrs="{'invisible':['|', '|', ('conditional', '=', False), ('conditional_question_id', '=', False),  ('conditional_question_type', '=', 'simple_choice')]}"
                        domain="[('question_id','=',conditional_question_id)]"
                        options="{'no_create_edit': True,}"
                    />
                    <field
                        name="conditional_maximum_value"
                        attrs="{'invisible':['|', '|', ('conditional', '=', False), ('conditional_question_id', '=', False),  ('conditional_question_type', '=', 'simple_choice')]}"
                        domain="[('question_id','=',conditional_question_id)]"
                        options="{'no_create_edit': True,}"
                    />
                </field>
            </field>
        </record>
    </data>
</odoo>
