<?xml version="1.0"?>
<!-- Copyright 2019 Vuente
     Copyright 2020 Le Filament (<https://www.le-filament.com>)
     License GPL-3.0 or later (https://www.gnu.org/licenses/gpl). -->
<odoo>
    <data>

        <record id="conditional_survey" model="ir.ui.view">
            <field name="name">survey.question.view.form.inherit.conditional</field>
            <field name="model">survey.question</field>
            <field name="inherit_id" ref="survey.survey_question_form"/>
            <field name="arch" type="xml">
                <field name="constr_mandatory" position="attributes">
                    <attribute name="attrs">{'invisible': [('conditional','=', True)]}</attribute>
                </field>
                <xpath expr="//page/group/group" position="inside">
                        <field name="survey_id" invisible="1" readonly="1" />
                        <field name="page_id" invisible="1" readonly="1" />
                        <field name="conditional" attrs="{'invisible':[('constr_mandatory', '=', True)]}"/>
                        <field name="conditional_question_id" domain="[('type', '=', 'simple_choice'), ('survey_id', '=', survey_id), ('page_id', '=', page_id)]" attrs="{'invisible':[('conditional', '=', False)], 'required': [('conditional', '=', True)]}" options="{'no_create_edit': True,}"/>
                        <field name="conditional_option_id" attrs="{'invisible':['|', ('conditional', '=', False), ('conditional_question_id', '=', False)], 'required':[('conditional', '=', True)]}" domain="[('question_id','=',conditional_question_id)]" options="{'no_create_edit': True,}"/>
                </xpath>
            </field>
       </record>

       <record id="survey_question_backend_readability_tree_inherited" model="ir.ui.view">
            <field name="name">survey.question.view.form.inherit.conditional</field>
            <field name="model">survey.question</field>
            <field name="inherit_id" ref="survey_backend_readability.survey_question_backend_readability_tree"/>
            <field name="arch" type="xml">
                <field name="type" position="after">
                    <field name="conditional"/>
                </field>
            </field>
       </record>

   </data>
</odoo>
